(()=>{"use strict";var e={393:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NeoQuizUi=void 0;const n=i(755),s=i(376);t.NeoQuizUi=class{constructor(e,t){this.root=e,this.quiz=t,this.selectedMultipleChoices=[],e.classList.add("neoquiz"),this.render()}render(){switch(this.quiz.currentState){case n.QuizState.WAITING:return void this.renderStartScreen();case n.QuizState.IN_PROGRESS:return void this.renderCurrentQuestion();case n.QuizState.FINISHED:return void this.renderResults()}}renderStartScreen(){if(this.clear(),this.appendElement("h2",this.quiz.title),this.quiz.image&&(this.appendElement("img",void 0,{src:this.quiz.image}),this.quiz.imageAttribution)){this.appendElement("span",void 0,{},["img-attribution"]).innerHTML=this.quiz.imageAttribution}this.appendElement("p",this.quiz.description);this.appendElement("button",this.quiz.uiStartText,{},["start-button"]).addEventListener("click",(()=>{this.quiz.start()}))}renderCurrentQuestion(){if(this.clear(),this.appendElement("h2",this.quiz.title),this.quiz.currentQuestion.image&&(this.appendElement("img",void 0,{src:this.quiz.currentQuestion.image}),this.quiz.currentQuestion.imageAttribution)){this.appendElement("span",void 0,{},["img-attribution"]).innerHTML=this.quiz.currentQuestion.imageAttribution}{const e=this.appendElement("div",void 0,{},["quiz-question"]),t=this.appendElement("div","Question ",{},["quiz-numbers"],e);this.appendElement("span",(this.quiz.currentQuestionNumber+1).toString(),{},["current-number"],t),this.appendElement("span"," of ",{},["of"],t),this.appendElement("span",this.quiz.numberOfQuestions.toString()+":",{},["total-number"],t),this.appendElement("h3",this.quiz.currentQuestion.title,{},[],e)}const e=this.appendElement("div",void 0,{},["quiz-answers"]);if(void 0===this.quiz.currentQuestion.shuffleAnswers||!0===this.quiz.currentQuestion.shuffleAnswers){const t=[];for(let e=0;e<this.quiz.currentQuestion.answers.length;e++)t.push(e);(0,s.shuffle)(t);for(const i of t)this.appendAnswer(this.quiz.currentQuestion.answers[i],i,e)}else for(let t=0;t<this.quiz.currentQuestion.answers.length;t++)this.appendAnswer(this.quiz.currentQuestion.answers[t],t,e);if(this.quiz.currentQuestion.multipleChoice){this.appendElement("button","Next",{disabled:"disabled"},["next-button"],e).addEventListener("click",(()=>{this.selectedMultipleChoices.length>0&&(this.quiz.answer(this.selectedMultipleChoices),this.selectedMultipleChoices=[])}))}}renderResults(){this.clear(),this.appendElement("h2",this.quiz.title);const e=this.appendElement("div",void 0,{style:"text-align: center"},["results-container"]),t=document.createElement("textarea");if(t.innerText="Loading HTML...",this.quiz.result?.image){const i=this.appendElement("img",void 0,{src:this.quiz.result.image},[],e);if(this.quiz.result?.imageAttribution){this.appendElement("span",void 0,{},["img-attribution"]).innerHTML=this.quiz.result.imageAttribution}i.addEventListener("load",(()=>{t.innerText=e.outerHTML;const n=document.createElement("img");n.src=i.src,i.replaceWith(n),t.innerText=e.outerHTML}))}else t.innerText=e.outerHTML;this.appendElement("h3",this.quiz.result?.name,{},[],e),this.appendElement("p",this.quiz.result?.description,{},[],e),this.appendElement("a",this.quiz.title,{href:window.location.href},[],e),this.appendElement("p","Share this result (HTML):",{},["share-html"]),this.root.appendChild(t);this.appendElement("button","Retake this quiz!",{},["retake-quiz"]).addEventListener("click",(()=>{this.quiz.start()}))}clear(){this.root.innerHTML=""}appendElement(e,t,i,n,s=this.root){const r=document.createElement(e);t&&(r.innerText=t);for(const e in i)r.setAttribute(e,i[e]);if(n)for(const e of n)r.classList.add(e);return s.appendChild(r),r}appendAnswer(e,t,i){const n=!!this.quiz.currentQuestion.multipleChoice,s="string"==typeof e?e:e.text,r=document.createElement("label");r.setAttribute("for",`answer-${t}`);const o=this.appendElement("div",void 0,{},["answer"],r);this.appendElement("span",s,{},[],o);const u=this.appendElement("input",void 0,{type:n?"checkbox":"radio",name:"answer",value:t.toString(),id:`answer-${t}`},["single-choice-input"],o);n?u.addEventListener("change",(e=>{e.target.checked?this.selectedMultipleChoices.push(t):this.selectedMultipleChoices=this.selectedMultipleChoices.filter((e=>e!==t));const n=i.querySelector(".next-button");n&&(0===this.selectedMultipleChoices.length?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled"))})):u.addEventListener("change",(()=>{this.quiz.answer(t)})),i.appendChild(r)}}},755:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NeoQuiz=t.QuizState=void 0;const n=i(393),s=i(947);var r;!function(e){e[e.WAITING=0]="WAITING",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.FINISHED=2]="FINISHED"}(r=t.QuizState||(t.QuizState={}));t.NeoQuiz=class{constructor(e){if(this.questions=[],this.results=[],this.resultStrategies=[],this.state=r.WAITING,this.finalResult=null,this.values=new Map,this._currentQuestion=0,e){for(const t of e.questions)this.addQuestion(t);for(const t of e.results)this.addResult(t);e.metadata&&(this.metadata=e.metadata)}}get numberOfQuestions(){return this.questions.length}get currentQuestionNumber(){return this._currentQuestion}get currentQuestion(){return this.questions[this._currentQuestion]}get currentState(){return this.state}get started(){return this.state!==r.WAITING}get finished(){return this.state===r.FINISHED}get result(){return this.finalResult}get title(){return this.metadata?.title??"Untitled Quiz"}get description(){return this.metadata?.description??""}get image(){return this.metadata?.image}get imageAttribution(){return this.metadata?.imageAttribution}get uiStartText(){return this.metadata?.startText??"Start"}addMetaData(e){this.metadata=e}addQuestion(e){this.questions.push(e)}addResult(e){for(const t of this.results)if(t.id===e.id)throw new Error(`Duplicate Quiz Result with id "${e.id}" added! Quiz Results must have unique IDs and can't be added twice!`);this.results.push(e)}addResultStrategy(e){this.resultStrategies.push(e)}addResultFunction(e){this.resultStrategies.push({decideResult:e})}bindTo(e){this.ui=new n.NeoQuizUi(e,this),this.render()}start(){if(0===this.questions.length)throw new Error("Cannot start a quiz with no questions!");if(0===this.results.length)throw new Error("Cannot start a quiz with no results!");0===this.resultStrategies.length&&this.resultStrategies.push(new s.SimpleResultStrategy),this.state=r.IN_PROGRESS,this._currentQuestion=0,this.finalResult=null,this.values=new Map,this.render()}answer(e){if(this.state!==r.IN_PROGRESS)throw new Error("You cannot answer a question to a quiz that is not in progress!");if(Array.isArray(e)){if(!this.questions[this._currentQuestion].multipleChoice)throw new Error("You cannot answer this question with multiple choices.");for(const t of e)this.registerAnswerValues(t)}else this.registerAnswerValues(e);this._currentQuestion++,this._currentQuestion>=this.questions.length&&this.decideResults(),this.render()}decideResults(){for(const e of this.resultStrategies){const t=e.decideResult(this.results,this.values);null!==t&&(this.finalResult=t)}null===this.finalResult&&(this.finalResult=this.results[0]),this.state=r.FINISHED}registerAnswerValues(e){const t=this.questions[this._currentQuestion].answers[e];if("string"==typeof t);else for(const e in t.values)if(this.values.has(e)){const i=this.values.get(e)+t.values[e];this.values.set(e,i)}else this.values.set(e,t.values[e])}render(){this.ui&&this.ui.render()}}},947:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleResultStrategy=void 0;t.SimpleResultStrategy=class{constructor(e){e?(this.data=e,this.useResultNamesAsValues=!1):(this.data={},this.useResultNamesAsValues=!0)}decideResult(e,t){let i,n=e[0].id,s=-1/0,r=[];for(const[e,i]of t.entries())i>=s&&(i===s?r.push(n):r=[],n=e,s=i);r.push(n),n=r[Math.floor(Math.random()*r.length)],i=!this.useResultNamesAsValues&&this.data[n]?this.data[n]:n;for(const t of e)if(t.id===i)return t;return null}}},376:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shuffle=void 0,t.shuffle=function(e){let t,i=e.length;for(;0!=i;)t=Math.floor(Math.random()*i),i--,[e[i],e[t]]=[e[t],e[i]];return e}},205:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(81),s=i.n(n),r=i(645),o=i.n(r)()(s());o.push([e.id,'.neoquiz{box-sizing:border-box;border:5px outset #000;padding:2em;width:100%;font-size:1.2em;line-height:1.2}.neoquiz *{box-sizing:border-box}.neoquiz h2{text-align:center}.neoquiz img{display:block;margin:0 auto}.neoquiz button{font-size:1.2em;padding:.5em;display:block;margin:0 auto;cursor:pointer}.neoquiz .quiz-question .quiz-numbers{font-size:1rem}.neoquiz .quiz-question .quiz-numbers .current-number,.neoquiz .quiz-question .quiz-numbers .total-number{font-size:1.2rem;font-weight:bold}.neoquiz .quiz-question .quiz-numbers .of{font-size:.9rem}.neoquiz .quiz-question h3{margin-top:0em}.neoquiz .quiz-answers{display:flex;flex-wrap:wrap;justify-content:center;align-items:stretch;align-content:stretch}.neoquiz .quiz-answers label{width:100%;margin:.5rem;font-size:1.5rem;cursor:pointer}.neoquiz .quiz-answers label:hover div{background-color:rgba(0,0,0,.2)}.neoquiz .quiz-answers label div{background-color:rgba(0,0,0,0);transition:background-color .3s;padding:.5rem;border:1px solid #000;display:flex;justify-content:space-between;align-items:center;height:100%}@media screen and (min-width: 900px){.neoquiz .quiz-answers label{width:45%}}.neoquiz .quiz-answers .next-button{width:100%;margin:.5rem}.neoquiz .results-container{border:1px dashed #000;border-radius:1em;padding:1em}.neoquiz .results-container img{display:block;margin:0 auto}.neoquiz .results-container h3{text-align:center}.neoquiz .share-html{text-align:center;margin-bottom:0}.neoquiz textarea{display:block;margin:0 auto;margin-bottom:2rem}.neoquiz img{max-width:100%;max-height:40vh}@media screen and (min-width: 900px){.neoquiz img{max-width:50%}}.neoquiz .img-attribution{display:block;width:100%;text-align:center;font-size:1rem;color:rgba(0,0,0,.6)}.neoquiz .img-attribution::before{content:"("}.neoquiz .img-attribution::after{content:")"}.neoquiz .img-attribution a{transition:color .3s;color:rgba(0,0,0,.6);font-weight:bold}.neoquiz .img-attribution a:hover{color:#000}@media screen and (min-width: 900px){.neoquiz{width:75%;margin:0 auto}}',""]);const u=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,s,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var u=0;u<this.length;u++){var a=this[u][0];null!=a&&(o[a]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);n&&o[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},565:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var n=i(379),s=i.n(n),r=i(795),o=i.n(r),u=i(569),a=i.n(u),l=i(636),d=i.n(l),h=i(216),c=i.n(h),p=i(589),m=i.n(p),f=i(205),g={};g.styleTagTransform=m(),g.setAttributes=d(),g.insert=a().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=c();s()(f.Z,g);const z=f.Z&&f.Z.locals?f.Z.locals:void 0},379:e=>{var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var r={},o=[],u=0;u<e.length;u++){var a=e[u],l=n.base?a[0]+n.base:a[0],d=r[l]||0,h="".concat(l," ").concat(d);r[l]=d+1;var c=i(h),p={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==c)t[c].references++,t[c].updater(p);else{var m=s(p,n);n.byIndex=u,t.splice(u,0,{identifier:h,updater:m,references:1})}o.push(h)}return o}function s(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,s){var r=n(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var u=i(r[o]);t[u].references--}for(var a=n(e,s),l=0;l<r.length;l++){var d=i(r[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=a}}},569:e=>{var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},636:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0;(()=>{const e=i(755),t=i(947);i(565),window.NeoQuiz=e.NeoQuiz,window.SimpleResultStrategy=t.SimpleResultStrategy})()})();